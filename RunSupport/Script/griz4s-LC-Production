
#!/bin/sh
#
# $Id$
# 
# This work was produced at the University of California, Lawrence 
# Livermore National Laboratory (UC LLNL) under contract no. 
# W-7405-ENG-48 (Contract 48) between the U.S. Department of Energy 
# (DOE) and The Regents of the University of California (University) 
# for the operation of UC LLNL. Copyright is reserved to the University 
# for purposes of controlled dissemination, commercialization through 
# formal licensing, or other disposition under terms of Contract 48; 
# DOE policies, regulations and orders; and U.S. statutes. The rights 
# of the Federal Government are reserved under Contract 48 subject to 
# the restrictions agreed upon by the DOE and University as allowed 
# under DOE Acquisition Letter 97-1.
# 
# 
# DISCLAIMER
# 
# This work was prepared as an account of work sponsored by an agency 
# of the United States Government. Neither the United States Government 
# nor the University of California nor any of their employees, makes 
# any warranty, express or implied, or assumes any liability or 
# responsibility for the accuracy, completeness, or usefulness of any 
# information, apparatus, product, or process disclosed, or represents 
# that its use would not infringe privately-owned rights.  Reference 
# herein to any specific commercial products, process, or service by 
# trade name, trademark, manufacturer or otherwise does not necessarily 
# constitute or imply its endorsement, recommendation, or favoring by 
# the United States Government or the University of California. The 
# views and opinions of authors expressed herein do not necessarily 
# state or reflect those of the United States Government or the 
# University of California, and shall not be used for advertising or 
# product endorsement purposes.
#
#################################################################
#								#
#	           Griz4 Script Template	                #
#								#
#################################################################
#
#################################################################
#  Revision History                                             #
#  ----------------                                             #
#								#
#  02-Nov-2006  IRC Added support for Totalview with -tv option.#
#								#
#   22-Aug-96  Original version.				#
#              (Robert J. Sherwood)				#
#								#
#   11-Dec-96  Added support for GLX/X distinction, Sun FFB, and#
#              OSF/Irix and OSF/Sun peculiarities		#
#              (Doug Speck)					#
#								#
#   14-Nov-06  Updated to match script on LC and new dir	#
#              structure for exe.				#
#              (Bob Corey)					#
#								#
#  02-Nov-2006  IRC Added support for Totalview with -tv option.#
#								#
#  02-Feb-2007  IRC Enabled usage logging if '-log' option set. #
#		** This is for testing. When testing is com-    #
#		the -log option will be removed and usage log-  #
#		ging will be the default.			#
#								#
#  15-Feb-2007  IRC Added support for running offscreen batch   #
#               Griz using OSMesa.				#
#								#
#  26-May-2008  IRC replaced constant system type with env var  #
#               $SYS_TYPE.			     	        #
#								#
#################################################################
#
#

GRIZHOME=/usr/gapps/mdg/$SYS_TYPE/archive/grizdir/grizversion/bin
HFONTLIB=/usr/gapps/mdg/$SYS_TYPE/archive/grizdir/grizversion/Font
LD_LIBRARY_PATH=/usr/X11R6/lib

GRIZLOGDIR=/usr/gapps/mdg
GRIZLOGFILE=griz_usagelog

LOGFILE=yes

export HFONTLIB GRIZHOME GRIZLOGDIR GRIZLOGFILE LOGFILE

alpha="no"
beta="no"
production="yes"
tv="no"
batch="no"
BATCH_NAME=""

for argument in $*; do
    if test $argument = "-alpha"
    then
        alpha="yes"
        production="no"
        GRIZALPHAHOME=/usr/gapps/mdg/$SYS_TYPE/archive/grizdir/grizalpha/bin
	HFONTLIB=/usr/gapps/mdg/$SYS_TYPE/archive/grizdir/grizalpha/Font
        GRIZHOME=/usr/gapps/mdg/$SYS_TYPE/archive/grizdir/grizalpha/bin
    fi

    if test $argument = "-beta"
    then
        beta="yes"
        production="yes"
        GRIZBETAHOME=/usr/gapps/mdg/$SYS_TYPE/archive/grizdir/grizbeta/bin
	HFONTLIB=/usr/gapps/mdg/$SYS_TYPE/archive/grizdir/grizbeta/Font
        GRIZHOME=/usr/gapps/mdg/$SYS_TYPE/archive/grizdir/grizbeta/bin
    fi

    if test $argument = "-tv"
    then
        tv="yes"
    fi

   if test $argument = "-log"
    then
        log="yes"
    fi

    if test $argument = "-batch"
    then
        batch="yes"
    fi

    if test $argument = "-b"
    then
        batch="yes"
    fi

done

if test $production = "yes"
then
    echo "** Loading Production version of Griz $GRIZHOME/griz4s.linux_opt **"
    if test $tv = "no"
    then
        if test $batch = "yes"
	then
	   $GRIZHOME/griz4s.linux_batch_opt $*
	else
	   $GRIZHOME/griz4s.linux_opt $*
	fi
    else
        if test $batch = "yes"
	then
           echo "** totalview $GRIZHOME/griz4s.linux_batch_opt -a -f $* **"
           totalview $GRIZHOME/griz4s.linux_batch_opt -a -f $*
	else
           echo "** totalview $GRIZHOME/griz4s.linux_opt -a -f $* **"
           totalview $GRIZHOME/griz4s.linux_opt -a -f $*
	fi
    fi
fi

if test $beta = "yes"
then
    echo "** Loading Beta version of Griz $GRIZBETAHOME/griz4s.linux_opt **"
    if test $tv = "no"
    then
        if test $batch = "yes"
	then
           $GRIZBETAHOME/griz4s.linux_batch_opt $*
	else
	   $GRIZBETAHOME/griz4s.linux_opt $*
	fi
    else
      if test $batch = "yes"
      then
         echo "** totalview $GRIZBETAHOME/griz4s.linux_batch_opt -a -f $* **"
         totalview $GRIZBETAHOME/griz4s.linux_batch_opt -a -f $*
      else
         echo "** totalview $GRIZBETAHOME/griz4s.linux_opt -a -f $* **"
         totalview $GRIZBETAHOME/griz4s.linux_opt -a -f $*
      fi
    fi
fi

if test $alpha = "yes"
then
    echo "** Loading Alpha version of Griz $GRIZALPHAHOME/griz4s.linux_opt **"
    if test $tv = "no"
    then
       if test $batch = "yes"
       then
          $GRIZALPHAHOME/griz4s.linux_batch_opt $*
       else
          $GRIZALPHAHOME/griz4s.linux_opt $*
       fi
    else
       if test $batch = "yes"
       then
          echo "** totalview $GRIZALPHAHOME/griz4s.linux_batch_opt -a -f $* **"
          totalview $GRIZALPHAHOME/griz4s.linux_batch_opt -a -f $*
       else
          echo "** totalview $GRIZALPHAHOME/griz4s.linux_opt -a -f $* **"
          totalview $GRIZALPHAHOME/griz4s.linux_opt -a -f $*
       fi
    fi
fi

