
#!/bin/sh
#
# $Id$
# 
# This work was produced at the University of California, Lawrence 
# Livermore National Laboratory (UC LLNL) under contract no. 
# W-7405-ENG-48 (Contract 48) between the U.S. Department of Energy 
# (DOE) and The Regents of the University of California (University) 
# for the operation of UC LLNL. Copyright is reserved to the University 
# for purposes of controlled dissemination, commercialization through 
# formal licensing, or other disposition under terms of Contract 48; 
# DOE policies, regulations and orders; and U.S. statutes. The rights 
# of the Federal Government are reserved under Contract 48 subject to 
# the restrictions agreed upon by the DOE and University as allowed 
# under DOE Acquisition Letter 97-1.
# 
# 
# DISCLAIMER
# 
# This work was prepared as an account of work sponsored by an agency 
# of the United States Government. Neither the United States Government 
# nor the University of California nor any of their employees, makes 
# any warranty, express or implied, or assumes any liability or 
# responsibility for the accuracy, completeness, or usefulness of any 
# information, apparatus, product, or process disclosed, or represents 
# that its use would not infringe privately-owned rights.  Reference 
# herein to any specific commercial products, process, or service by 
# trade name, trademark, manufacturer or otherwise does not necessarily 
# constitute or imply its endorsement, recommendation, or favoring by 
# the United States Government or the University of California. The 
# views and opinions of authors expressed herein do not necessarily 
# state or reflect those of the United States Government or the 
# University of California, and shall not be used for advertising or 
# product endorsement purposes.
#
#################################################################
#								#
#	           Griz4 Script Template	                #
#								#
#################################################################
#
#################################################################
#  Revision History                                             #
#  ----------------                                             #
#								#
#  02-Nov-2006  IRC Added support for Totalview with -tv option.#
#								#
#   22-Aug-96  Original version.				#
#              (Robert J. Sherwood)				#
#								#
#   11-Dec-96  Added support for GLX/X distinction, Sun FFB, and#
#              OSF/Irix and OSF/Sun peculiarities		#
#              (Doug Speck)					#
#								#
#   14-Nov-06  Updated to match script on LC and new dir	#
#              structure for exe.				#
#              (Bob Corey)					#
#								#
#  02-Nov-2006  IRC Added support for Totalview with -tv option.#
#								#
#  02-Feb-2007  IRC Enabled usage logging if '-log' option set. #
#		** This is for testing. When testing is com-    #
#		the -log option will be removed and usage log-  #
#		ging will be the default.			#
#								#
#  15-Feb-2007  IRC Added support for running offscreen batch   #
#               Griz using OSMesa.				#
#								#
#  15-Apr-2007  IRC Made session logging enabled as default.    #
#								#
#  26-Apr-2007  Added option to display PDF manual.             #
#                                             			#
#  03-May-2007  IRC Added method to specify a specific version  #
#		of Griz to execute.                             #
#								#
#################################################################
#
#
GRIZHOME=_grizhome_
HFONTLIB=_hfontlib_
LD_LIBRARY_PATH=_ldlibpath_

GRIZLOGDIR=/usr/gapps/mdg
GRIZLOGFILE=griz_usagelog

LOGFILE=yes

export HFONTLIB GRIZHOME GRIZLOGDIR GRIZLOGFILE GRIZDOC LOGFILE

alpha="no"
beta="no"
production="yes"
qtgriz="no"
tv="no"
batch="no"
grizman="no"
version="no"
version_requested="no"

BATCH_NAME=""

for argument in $*; do

    if test $version_requested = "yes"
    then
	version_requested="no"
        GRIZHOME=_grizhome_/../$argument
        GRIZALPHAHOME=_grizhome_/../$argument
    fi	

    if test $argument = "-qtgriz"
    then
        qtgriz="yes"
        alpha="no"
        beta="no"
        production="no"
	version="no"
    fi

    if test $argument = "-alpha"
    then
        alpha="yes"
        production="no"
        GRIZHOME=_grizhome_/../alpha
        GRIZALPHAHOME=_grizhome_/../alpha
    fi

    if test $argument = "-beta"
    then
        beta="yes"
        production="no"
        GRIZHOME=_grizhome_/../beta
        GRIZBETAHOME=_grizhome_/../beta
    fi

    if test $argument = "-tv"
    then
        tv="yes"
    fi

   if test $argument = "-log"
    then
        log="yes"
    fi

    if test $argument = "-batch"
    then
        batch="yes"
    fi

    if test $argument = "-b"
    then
        batch="yes"
    fi

    if test $argument = "-man"
    then
        grizman="yes"
    fi

    if test $argument = "-manual"
    then
        grizman="yes"
    fi

    if test $argument = "-version"
    then
        qtgriz="no"
        alpha="no"
        beta="no"
        production="no"
        version="yes"
	version_requested="yes"
    fi
done

if test $production = "yes"
then
    echo "** Loading Production version of Griz $GRIZHOME/_grizbin_ **"
    if test $tv = "no"
    then
        if test $batch = "yes"
	then
	   $GRIZHOME/_grizbinbatch_ $* -f -log
	else
	   $GRIZHOME/_grizbin_ $* -log
	fi
    else
        if test $batch = "yes"
	then
           echo "** totalview $GRIZHOME/_grizbinbatch_ -a -f $* **"
           totalview $GRIZHOME/_grizbin_ -a -f $*
	else
           echo "** totalview $GRIZHOME/_grizbin_ -a -f $* **"
           totalview $GRIZHOME/_grizbin_ -a -f $*
	fi
    fi
fi

if test $beta = "yes"
then
    echo "** Loading Beta version of Griz $GRIZBETAHOME/_grizbin_ **"
    if test $tv = "no"
    then
        if test $batch = "yes"
	then
           $GRIZBETAHOME/_grizbinbatch_ $* -f -log
	else
	   $GRIZBETAHOME/_grizbin_ $* -log
	fi
    else
      if test $batch = "yes"
      then
         echo "** totalview $GRIZBETAHOME/_grizbinbatch_ -a -f $* **"
         totalview $GRIZBETAHOME/_grizbinbatch_ -a -f $*
      else
         echo "** totalview $GRIZBETAHOME/_grizbin_ -a -f $* **"
         totalview $GRIZBETAHOME/_grizbin_ -a -f $*
      fi
    fi
fi

if test $alpha = "yes"
then
    echo "** Loading Alpha version of Griz $GRIZALPHAHOME/_grizbin_ **"
    if test $tv = "no"
    then
       if test $batch = "yes"
       then
          $GRIZALPHAHOME/_grizbinbatch_ $* -f -log
       else
          $GRIZALPHAHOME/_grizbin_ $* -log
       fi
    else
       if test $batch = "yes"
       then
          echo "** totalview $GRIZALPHAHOME/_grizbinbatch_ -a -f $* **"
          totalview $GRIZALPHAHOME/_grizbinbatch_ -a -f $*
       else
          echo "** totalview $GRIZALPHAHOME/_grizbin_ -a -f $* **"
          totalview $GRIZALPHAHOME/_grizbin_ -a -f $*
       fi
    fi
fi

if test $qtgriz = "yes"
then
    echo "** Loading QT version of Griz $GRIZQTHOME/griz4s.linux_opt_qt **"
    $GRIZQTHOME/_grizbin_ $* -log
fi

if test $version = "yes"
then
    echo "** Loading User Specified version of Griz $GRIZHOME/griz4s.linux_opt **"
    $GRIZHOME/_grizbin_ $* -log
fi

if test $grizman = "yes"
then
   acroread $GRIZHOME/griz_manual.pdf&
fi
