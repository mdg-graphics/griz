#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++#
#                                                               #
#                      Copyright (c) 2004                       #
#         The Regents of the University of California           #
#                     All Rights Reserved                       #
#                                                               #
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++#
#
# The Regents of the University of California.  
# All rights reserved.
# 
# This work was produced at the University of California, 
# Lawrence Livermore National Laboratory (UC LLNL) under 
# contract no. W-7405-ENG-48 between the U.S. Department of 
# Energy (DOE) and The Regents of the University of California
# (University) for   the operation of UC LLNL. Copyright is 
# reserved to the University for purposes of controlled dis-
# semination, commercialization through formal licensing, or 
# other disposition under terms of Contract 48; DOE policies, 
# regulations and orders; and U.S. statutes.
# 
# DISCLAIMER OF LIABILITY
# 
# This document was prepared as an account of work sponsored 
# by an agency of the United States Government.  Neither the 
# United States Government nor the University of California 
# nor any of their employees, makes any warranty, express
# or implied, including the warranties of merchantability
# and fitness for a particular purpose, or assumes any legal
# liability or responsibility for the accuracy, completeness,
# or usefulness of any information, apparatus, product, or 
# process disclosed, or represents that its use would not 
# infringe privately-owned rights.
# 
# DISCLAIMER OF ENDORSEMENT
# 
# Reference herein to any specific commercial products,
# process, or service by trade name, trademark, manufacturer,
# or otherwise, does not necessarily constitute or imply its
# endorsement, recommendation, or favoring by the United States
# Government or the University of California.  The views and 
# opinions of authors expressed herein do not necessarily state
# or reflect those of the United States Government or the 
# University of California, and shall not be used for advertising
# or product endorsement purposes.
#
#################################################################
#								#
#	           Griz4 Driver Makefile	                #
#								#
#################################################################
#
#################################################################
#  Revision History                                             #
#  ----------------                                             #
#  20-Feb-2004  IRC  Created.                                   #
#################################################################

OS_NAME         =       @OS_NAME@

SRC_DIRS	=       @EXT_BUILDS@
ROOT_DIR        = 	@ROOT_DIR@
INSTALL_DIR     = 	@INSTALL_DIR@

MESA_LIB_DIRS   =       @EXT_MESA_LIB_DIRS@
TASKS_DEFAULT   =	16

ifndef TASKS
TASKS=$(TASKS_DEFAULT)
endif

ifdef VERBOSE
MAKE		=	gmake -j $(TASKS) --debug=v
else
MAKE		=	gmake -j $(TASKS)
endif

help:
ifdef VERBOSE
		@ echo "\nVerbose Mode"
endif
		@ echo "            ******************************"
		@ echo "            * Building zlib and png libraries*"
		@ echo "            ******************************"

all:
		@ for src_dir in $(SRC_DIRS); do \
			cd $(ROOT_DIR)/ext; \
			cd $$src_dir; \
			$(MAKE) install; \
		done

opt:
		@ for src_dir in $(SRC_DIRS); do \
			cd $(ROOT_DIR)/ext; \
			cd $$src_dir; \
			$(MAKE) install; \
		done

debug:
		@ for src_dir in $(SRC_DIRS); do \
			cd $(ROOT_DIR)/ext; \
			cd $$src_dir; \
			$(MAKE) install; \
		done

clean:
		@ for src_dir in $(MESA_LIB_DIRS); do \
			cd $$src_dir; \
			rm -f lib* ; \
		done

		@ for src_dir in $(SRC_DIRS); do \
			cd $(ROOT_DIR)/ext; \
			cd $$src_dir; \
			$(MAKE) clean; \
		done

clobber:
		@ for src_dir in $(SRC_DIRS); do \
			cd $(ROOT_DIR)/ext; \
			cd $$src_dir; \
			$(MAKE) clobber; \
		done

distclean:
		@ for src_dir in $(SRC_DIRS); do \
			cd $(ROOT_DIR)/ext; \
			cd $$src_dir; \
			$(MAKE) distclean; \
		done



install:
		@ cd $(INSTALL_DIR); \
	        $(MAKE) all;


install-initversion:
		@ cd $(INSTALL_DIR); \
	        $(MAKE) install-initversion;

install-chmod:
		@ cd $(INSTALL_DIR); \
	        $(MAKE) install-chmod;

install-updateFont:
		@ cd $(INSTALL_DIR); \
	        $(MAKE) install-updateFont;

install-setversion:
		@ cd $(INSTALL_DIR); \
	        $(MAKE) install-setversion;

install-startmsg:
		@ cd $(INSTALL_DIR); \
	        $(MAKE) install-startmsg;

uninstall:
		@ for src_dir in $(SRC_DIRS); do \
			cd $(ROOT_DIR)/ext; \
			cd $$src_dir; \
			$(MAKE) uninstall; \
		done
